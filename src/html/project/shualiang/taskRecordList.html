<!DOCTYPE html>
<!-- saved from url=(0061)taskRecordList.action -->
<html style="" class=" js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers no-applicationcache svg inlinesvg smil svgclippaths"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

        <!--
        <meta http-equiv="X-UA-Compatible" content="IE=EDGE">
         -->
        <meta name="renderer" content="webkit">
        <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
        <meta name="description" content="A fully featured admin theme which can be used to build CRM, CMS, etc.">
        <meta name="author" content="Coderthemes">

        <title>任务积分记录</title>
        <link href="./css/sweetalert.css" rel="stylesheet" type="text/css">
        <link href="./css/bootstrap.min.css" rel="stylesheet" type="text/css">
        <link href="./css/core.css" rel="stylesheet" type="text/css">
        <link href="./css/icons.css" rel="stylesheet" type="text/css">
        <link href="./css/components.css" rel="stylesheet" type="text/css">
        <link href="./css/pages.css" rel="stylesheet" type="text/css">
        <link href="./css/menu.css" rel="stylesheet" type="text/css">
        <link href="./css/responsive.css" rel="stylesheet" type="text/css">
        <script src="./js/modernizr.min.js"></script>
    	<style type="text/css">
			.bg-custom{
			    background-color: #e0b40e !important;
			}
			.bg-custom{
			    background-color: #e0b40e !important;
			}
			* {
		        box-sizing: border-box;
		    }
			body, html {
		        margin: 0;
		        padding: 0;
		    }
		    body {
		        padding-top: 50px;
		    }
		    .fs-fixed-top {
		        position: fixed;
		        top: 0;
		        left: 0;
		        z-index: 10000;
		        width: 100%;
		        height: 50px;
		        line-height: 48px;
		        text-align: center;
		        background-color: #fff;
		        border-bottom: 1px solid #ddd;
		    }
		    .fs-fixed-top .title {
		        margin: 0;
		        font-size: 14px;
		        font-weight: 700;
		    }
		    .demo-content {
		        height: 200px;
		    }
		    .back-btn {
		        position: absolute;
		        left: 12px;
		        top: 15px;
		        z-index: 1000;
		        font-size: 0;
		        display: inline-block;
		        width: 20px;
		        height: 20px;
		        line-height: 1;
		    }
		    .back-btn img {
		        width: 20px;
		        height: 20px;
		        display: inline-block;
		    }
    	</style>
    </head>
    <body class="fixed-left widescreen">
    	<div class="fs-fixed-top">
	        <a href="main.html" class="back-btn">
	            <img src="./img/back.png">
	        </a>
	        <p class="title">任务积分记录（只显示最近30条）</p>
	    </div>
    	<div id="wrapper">
			<div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <table class="table table-striped">
                                    <tbody style="text-align:center">
                                    	<tr>
                                            <th style="width:30%;text-align:center">操作</th>
                                            <th style="width:20%;text-align:center">积分</th>
                                            <th style="width:50%;text-align:center">时间</th>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- End row -->
     	</div>
        <script>
            var resizefunc = [];
        </script>

        <!-- jQuery  -->
        <script src="./js/jquery.min.js"></script>
        <script src="./js/bootstrap.min.js"></script>
        <script src="./js/detect.js"></script>
        <script src="./js/fastclick.js"></script>
        <script src="./js/jquery.slimscroll.js"></script>
        <script src="./js/jquery.blockUI.js"></script>
        <!--
        <script src="assets/js/waves.js"></script>
         -->
        <script src="./js/wow.min.js"></script>
        <script src="./js/jquery.nicescroll.js"></script>
        <script src="./js/jquery.scrollTo.min.js"></script>
        <script src="./js/jquery.app.js"></script>
        <script src="./js/image.js"></script>
        <script src="./js/common.js"></script>
        <script src="./js/ajaxfileupload.js"></script>
        <script src="./js/sweetalert.min.js"></script>
        <script type="text/javascript">
            jQuery(document).ready(function($) {

           	    $('#file').on('change',function(){
      		        var filePath = $(this).val();         //获取到input的value，里面是文件的路径
      		        var fileFormat = filePath.substring(filePath.lastIndexOf(".")).toLowerCase();
      		        var src = window.URL.createObjectURL(this.files[0]); //转成可以在本地预览的格式
      		        $('#uploadImg').prop('src',src);
       		    });

	           	$('#img').change(function() {
	                var file = this.files[0];
	                var r = new FileReader();
	                r.readAsDataURL(file);
	                $(r).load(function() {
	                    $("#photoImg").prop("src",this.result);
	                })
	            });
	           	var photoImg = $('#photoImg');
	           	var imgsObj = $('.amplifyImg img');//需要放大的图像

	           	showImage123(imgsObj);
	           	showImage123(photoImg);
            });

            function openDouyin(){
            	var taskUrl = $("#taskUrl").val();
            	//https://v.douyin.com/sy57or/
            	window.open(taskUrl);
            }

            function loadMenu(url){
            	$("#mainFrame").attr("src",url);
            }

            function showFile(){
            	var imgFile = $("#file").files[0];
                var fr = new FileReader();
                fr.onload = function () {
                    $("#uploadImg").src = fr.result;
                };
                // 注意要先设置回调再读取文件
                fr.readAsDaraURL(imgFile);
            }

            function startTask(){
            	var telephone = $("#telephone").val();
            	var taskType = "";
            	$('#input[name="taskType"]:checked').each(function(){
        			taskType += $(this).val() + ",";
                });
            	$.ajax({
            		async : true,
            		type : "POST",
            		url : "/wxTask/task/getTask.action",
            		contentType : "application/x-www-form-urlencoded; charset=utf-8",
            		data : {
            			telephone : telephone,
            			taskType : taskType
            		},
            		dataType : "JSON",
            		success : function(data){
            			if(data.code == 200){
            				//保存成功，跳转至详情页面
            				window.location.href = "/wxTask/task/douyinTask.action";
                        }else{
                        	toast("获取任务失败",1000);
                        	return;
                        }
            		},
            		error : function(){
            			swal("系统异常！");
            		}
            	});
            }

            function imgUpload(){
            	$("#file").click();
            }

            function submitTask(){
            	var file = $("#img").val();
            	if(checkParameterIsEmpty(file)){
            		toast("请上传任务截图",1000);
            		return;
            	}
            	var formData = new FormData($("#taskForm")[0]);
            	$.ajax({
                    url : "/wxTask/task/submitTask.action",
                    type : 'POST',
                    data : formData,
                    // 告诉jQuery不要去处理发送的数据
                    processData : false,                 
                    // 告诉jQuery不要去设置Content-Type请求头
                    contentType : false,
                    async : false,
                    success : function(data) {
                    	if(data.code == 200){
                    		toast("提交成功",1000);
            				//保存成功，跳转至详情页面
            				window.location.href = "/wxTask/dashboard/douyinPage.action";
                        }else{
                        	toast("提交失败",1000);
                        	return;
                        }
                    }
                });
            }

			function cancelTask(){
				swal({
	                title: "放弃确认",
	                text: "由于任务视频自身异常的原因，而导致无法完成时，允许放弃任务，恶意放弃会导致封号，确认放弃该任务吗?",
	                type: "warning",
	                showCancelButton: true,
	                confirmButtonColor: "#DD6B55",
	                confirmButtonText: "确定",
	                cancelButtonText: "取消",
	                closeOnConfirm: false
	            }, function(){
	            	$.ajax({
	            		async : true,
	            		type : "POST",
	            		url : "/wxTask/education/deleteEducation.action",
	            		contentType : "application/x-www-form-urlencoded; charset=utf-8",
	            		data : {
	            			educationId : rowId
	            		},
	            		dataType : "JSON",
	            		success : function(data){
	            			if(data.result == true){
	            				//保存成功，跳转至详情页面
	            				swal("删除成功");
	            				datatable.api().ajax.reload();
	                        }else{
	                        	swal("删除失败！");
	                        }
	            		},
	            		error : function(){
	            			swal("系统异常！");
	            		}
	            	});
	            });
            }

          //检查值是否为空；空：返回true；不为空返回false
            function checkParameterIsEmpty(parameter){
            	if(parameter == null || parameter == "null" || parameter == "" || parameter == "undefined" || parameter == undefined){
            		return true;
            	}else{
            		return false;
            	}
            }
           /* $("#menuHtml").load("menu.jsp"); */
        </script>


</body></html>
